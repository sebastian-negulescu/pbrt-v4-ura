LookAt # 3 4 1.5  # eye
        -6 3 1.5 # try to look at laser beam
       .5 .5 0  # look at point
       0 0 1    # up vector
Camera "perspective" "float fov" 45

Sampler "halton" "integer pixelsamples" 128
Integrator "volpath"
    "integer maxdepth" 32
Film "rgb" "string filename" "images/collimator_test.png"
     "integer xresolution" [400] "integer yresolution" [400]

WorldBegin

Include "collimator.pbrt"

# uniform blue-ish illumination from all directions
LightSource "infinite" "rgb L" [ .4 .45 .5 ]

# approximate the sun
LightSource "distant"  "point3 from" [ -30 40  100 ]
   "blackbody L" 3000 "float scale" 1.5

AttributeBegin
    # Rotate -90 0 0 1
    # Translate 0 -3 0
    Rotate -90 1 0 0

    Rotate -90 1 0 0
    Translate 0 0 -0.05
    # Translate 0 0 -1
    AreaLightSource "diffuse" 
        "rgb L" [ 0 1 0 ] 
        "float power" [ 100 ]
    Shape "disk" "float radius" [ 0.05 ]
AttributeEnd

AttributeBegin
    # Rotate -90 0 0 1
    # Translate 0 -3 0
    Rotate -90 1 0 0
    Scale 0.05 0.05 0.05
    ObjectInstance "collimator"
AttributeEnd

AttributeBegin
    Material "diffuse"
        "rgb reflectance" [ 0 0 0.8 ]
    Scale 0.2 0.2 0.2
#     Include "cube.pbrt"
AttributeEnd

AttributeBegin
    Material "dielectric"
        # "float roughness" 0.0001
        "spectrum eta" "glass-BK7"
    # Include "cube.pbrt"
    # Include "manual_tesseract.pbrt"
AttributeEnd

AttributeBegin
  Texture "checks" "spectrum" "checkerboard"
          "float uscale" [16] "float vscale" [16]
          "rgb tex1" [.1 .1 .1] "rgb tex2" [.8 .8 .8]
  Material "diffuse" "texture reflectance" "checks"
  Translate 0 0 -1
  Shape "bilinearmesh"
      "point3 P" [ -20 -20 0   20 -20 0   -20 20 0   20 20 0 ]
      "point2 uv" [ 0 0   1 0    1 1   0 1 ]
AttributeEnd

